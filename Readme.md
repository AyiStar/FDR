# Face Detection and Recognition

## 第三方库
* cv2(python-opencv)
* dlib
* numpy
* face_recognition


## 原理说明

将数据库中的图片通过已经训练好的神经网络,计算出每张图片中人脸的128个特征值的向量.不同人的图片分别保存在不同的文件夹下,经过转化的向量组保存在一个.dat文件下,每个文件对应一个人,文件中的每一行对应一张图片转化成的128维向量.

在实时的人脸检测中,程序只需一次性将所有.dat文件中的向量一次性载入内存,保存成一个(姓名:向量组)字典.对于获取到的图像,通过face detection检测出人脸位置,并同样得到该未知人脸的128维向量,将该向量与库中已有向量进行相似度计算(这里采用欧式距离).设置距离阈值,若所有距离均大于阈值,则认为是陌生人,否则给出距离最小的向量对应的姓名.

## 优点
* 所需数据量很小,测试时每个人一张照片也能进行识别,十张即可达到很高的准确率.
* 有具体数值度量相似度.
* 可将陌生人实时动态地加入数据库,只需现场采集十张左右的照片,并一次性计算出特征向量,保存在xxx.dat文件中即可.
* 若识别错误,可以动态进行修正,只需现场采集照片,更新其.dat文件即可.同理也可以动态删除.
* 正确率比上次提高很多,主要是因为,基于特征向量的计算,是通过定位人脸的特征点,这种度量光照影响小,因为用的是灰度图,角度影响也小,因为通过特征点做旋转可实现姿势矫正.

## 等待解决的问题
* 还需要寻找一个更好的数学计算方法,计算向量之间的相似度.目前是基于简单的欧式距离,但这个方法存在着问题:首先不是归一化的,也就是说不能解释成相似度百分之多少这样的直观概念.带来的接下来的问题就是,其阈值只能通过经验设定,这里我取的是0.4或0.5.

## 后续要做的扩展
* 将提供一个图形化管理界面.
* 将进一步提高准确率.

## 样例
见example.py